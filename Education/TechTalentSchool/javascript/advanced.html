<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>TechTalentSchool | Advanced JavaScript </title>
    <meta name="author" content="Kostas Minaidis">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Bulma.io | https://cdnjs.com/libraries/bulma-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <link rel="stylesheet" href="../libs/reveal.js/css/reveal.css">
    <link id="theme" rel="stylesheet" href="../libs/reveal.js/css/theme/black-tts.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack.css">
    <!-- Roboto | Google Web Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <!-- Theme used for syntax highlighting of code-->
    <link rel="stylesheet" href="../libs/reveal.js/lib/css/monokai-sublime-sha.css">
    <link rel="stylesheet" href="../css/reveal-overrides.css">
    <link rel="stylesheet" href="../css/reveal-tts.css">
    <style>
      a.full-anchor {
          position: fixed;
          top     : -50%;
          left    : -50%;
          width   : 200vw;
          height  : 200vh;
          text-indent: -50000px;
      }
      .reveal .slide-background {
          background-size: contain;
      }
      .svg_contain svg {
          position:absolute;
          top     :0;
          left    :0;
          width   :100%;
          height  :auto;"
      }
    </style>
    <style>
      #array_recap pre.small { margin-bottom: -8px; }
      
    </style>
    <style id="tts">
      .reveal.tts-intro {
          background-image: url('images/tts-titles-js-advanced.jpg');
      }
      .reveal.tts-outro {
          background-image: url('images/tts-titles-joinus.jpg');
      }
      .reveal.tts-intro,
      .reveal.tts-outro {
          background-repeat: no-repeat;
          background-size: contain;
          background-position: center;
      }
      .reveal.tts-intro .progress,
      .reveal.tts-outro .progress {
          display: none !important;
      }      
      
    </style>
  </head>
  <body>
    <!-- Alt+Click | Zoom-->
    <!-- S | Speaker View-->
    <!-- B or . | Pause View-->
    <div class="reveal">
      <div class="slides">
        <!-- TTS | INTRO-->
        <section class="tts-title" id="tts-intro" data-state="tts-intro" data-transition="fade-out"></section>
        <!-- INTRO-->
        <section data-transition="fade-out">
          <h2>Advanced JavaScript</h2>
          <h3 class="colorful">Front-end Bootcamp</h3>
          <p><small>Created by <a href="https://github.com/kostasx">Kostas Minaidis</a> | Dec 2018</small></p>
        </section>
        <!-- AGENTA-->
        <section>
          <h3>Agenta</h3>
          <ul style="font-size:0.8em;">
            <li>Handling Asynchronous code with Async/Await</li>
            <li>Understanding `this` &amp; Explicit Binding: call, apply, bind </li>
            <li>ES6: Default Function Parameters</li>
            <li>ES6: Spread Operator &amp; Destructuring Assignments</li>
            <li>ES6: Modules</li>
            <li>Types &amp; Equality</li>
            <li>JS Patterns: The IIFE </li>
            <li>Regular Expressions</li>
          </ul>
        </section>
        <!-- ASYNC / AWAIT-->
        <section>
          <section>
            <h4>Handling Asynchronous Operations using</h4>
            <h1 class="colorful">Async / Await</h1>
          </section>
          <section>
            <div class="columns">
              <div class="column is-8 is-offset-2">
                <h6>Asynchronous Functions</h6>
                <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>async function connect(){ ... }

</code></pre>
                <p class="fragment small">An <strong class="colorful">async</strong>(hronous) function operates asynchronously, using an implicit <strong class="colorful">Promise</strong> to return its result. </p>
                <p class="fragment small">The syntax and structure is much more like using standard synchronous functions.</p>
                <p class="small fragment"> <strong class="colorful">Open your console and compare the result of the following commands:</strong></p>
                <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>      function normal(){ return 42; }
async function normal(){ return 42; }
</code></pre>
              </div>
            </div>
          </section>
          <section>
            <h6>The <strong class="colorful">await</strong> keyword</h6>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>async function connect(){
    const result = await promiseCommand();
}</code></pre>
            <div class="columns">
              <div class="column is-8 is-offset-2">
                <p class="small fragment">An async function can contain an <strong class="colorful">await</strong> expression that pauses the execution of the async function and waits for the passed Promise's resolution, and then resumes the async function's execution and returns the resolved value.</p>
                <p class="small fragment">Remember, the await keyword is only valid inside async functions.</p><a class="fragment small" target="_blank" href="https://codepen.io/kostasx/pen/ePNVbx">CodePen</a>
              </div>
            </div>
          </section>
          <section>
            <h6>Practice makes perfect...</h6><a href="https://codepen.io/kostasx/pen/maOVyo?editors=0011" target="_blank">Warming up... </a>
            <div class="linebreak"></div><a href="https://codepen.io/kostasx/pen/QzGbrB?editors=0011" target="_blank">CodePen Exercise #1</a>
            <div class="linebreak"></div><a href="https://codepen.io/kostasx/pen/oJYjYw?editors=0001" target="_blank">CodePen Exercise #2</a>
          </section>
          <section>
            <h3>Example:</h3><a target="_blank" href="https://codepen.io/kostasx/pen/NONQgL?editors=0011">Hands-on: Bitcoin Wallet</a><br><a class="bitly_link" target="_blank" href="https://bit.ly/2No4jlx"><span>https://bit.ly/<strong>2No4jlx</strong></span></a>
          </section>
        </section>
        <!-- this, call, apply, bind-->
        <section>
          <!-- INTRODUCTION-->
          <section>
            <h3>Understanding <strong class="colorful">this</strong></h3>
            <div class="columns">
              <div class="column is-10 is-offset-1">
                <p class="small">When a function is invoked an execution context is created which is like a record containing information about where the function was called from (call-stack), how the function was invoked, what parameters were passed, etc. One of the properties of this record is the <strong class="colorful">this</strong> reference which will be used for the duration of that function's execution.</p>
                <p class="small fragment">What <strong class="colorful">this</strong> references is determined entirely<br/>by the call-site where the function is called.</p>
              </div>
            </div>
          </section>
          <!-- GLOBAL CONTEXT-->
          <section>
            <h3><strong class="colorful">this</strong> in Global Context</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>console.log( this );

function run(){
    console.log( this );
}</code></pre>
            <div class="linebreak"></div>
            <p class="small fragment">Both functions run within the global <strong class="colorful">(window)</strong> object.</p>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>window.console.log( this );
window.run();</code></pre>
            <p class="small fragment">In both cases, <strong class="colorful">this</strong> references the window object (the functions' call-site).</p>
          </section>
          <!-- FUNCTION CONSTRUCTORS + CLASSES-->
          <section>
            <h3><strong class="colorful">this</strong> in Function Constructors</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>function Person( name ){
    console.log( this );
    this.name = name;
    this.show = function(){
        console.log( this.name );
    }
}</code></pre>
            <div class="linebreak"></div>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = new Person( "Kostas" );
person.show();</code></pre>
            <p class="small fragment"><strong class="colorful">this</strong> is a reference to the Object created<br/>by the Function constructor using the <strong class="colorful">new</strong> keyword.</p>
            <p class="small fragment">But...</p>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>Person( "Mary" );</code></pre>
          </section>
          <!-- ES6 CLASSES-->
          <section>
            <h3><strong class="colorful">this</strong> in ES6 Classes</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>class Person {
    constructor( name ){
        console.log( this );
        this.name = name;
    }
    show(){
        console.log( this.name );
    }
}</code></pre>
            <div class="linebreak"></div>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = new Person( "Kostas" );
person.show();</code></pre>
            <p class="small fragment">Since ES6 Classes are based on Function Constructors<br/>and Objects, they behave in much the same way.</p>
          </section>
          <!-- OBJECT METHODS-->
          <section>
            <h3><strong class="colorful">this</strong> in Object Methods</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = {
    name: "Kostas",
    show: function(){
        console.log( this, this.name );
    }
}</code></pre>
            <p class="fragment small">When a function is called as a method of an object,<br/>its <strong class="colorful">this</strong> is set to the object the method is called on.</p>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>person.show();
// person { }, "Kostas"</code></pre>
          </section>
          <!-- OBJECT METHODS #2-->
          <section>
            <h3><strong class="colorful">this</strong> in Object Methods #2</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = {
    name: "Kostas",
    show: function(){
        console.log( this, this.name );
    }
}
let other = {
    name: "Mary"
}
other.show = person.show;</code></pre>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>other.show();
// other { }, "Mary"</code></pre>
            <p class="fragment small"><strong class="colorful">REMEMBER</strong>: <strong class="colorful">this</strong> is set to the object the method is <strong class="colorful">called on</strong>.</p>
          </section>
          <!-- DOM Event Handlers-->
          <section>
            <h3><strong class="colorful">this</strong> in DOM Event Handlers</h3>
            <button id="clickme" style="padding:10px 20px; font-size: 1.5rem">Click Me!</button>
            <div class="linebreak"></div><br>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let $button = document.querySelector("#clickme");

$button.addEventListener( "click", function(){

    console.log( this );

});</code></pre>
            <p class="small fragment">When a function is used as an event handler,<br/>its <strong class="colorful">this</strong> is set to the element the event fired from.</p>
          </section>
          <!-- bind, call, apply-->
          <section>
            <h3>Explicit Binding:<br/><strong class="colorful"> bind(), apply(), call()</strong></h3>
          </section>
          <!-- bind-->
          <section>
            <h3><strong class="colorful"> bind()</strong></h3>
            <p class="fragment">Bind <strong class="colorful">this</strong> to <strong class="colorful">any</strong> Object explicitly.</p>
            <button class="fragment" id="somebutton" style="padding:10px 20px; font-size: 1.5rem">Some Button!</button>
            <div class="linebreak"></div><br>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = { name: "Kostas" }</code></pre>
            <div class="linebreak"></div>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let $button = document.querySelector("#somebutton");</code></pre>
            <div class="linebreak"></div>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>function handleClick(){ console.log( this ); }</code></pre>
            <div class="linebreak"></div>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>$button.addEventListener( "click", handleClick.bind( person ) );</code></pre>
          </section>
          <!-- bind #2-->
          <section>
            <h3><strong class="colorful"> bind()</strong> #2</h3>
            <div class="linebreak"></div><br>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = { name: "Kostas" }

function show(){
    console.log( this.name );
}

show();

let personShow = show.bind( person );

personShow();</code></pre>
          </section>
          <!-- call, apply-->
          <section>
            <h3><strong class="colorful"> call(), apply()</strong></h3>
            <div class="linebreak"></div><br>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let person = { 
    name: "Kostas",
    show: function( msg, end ){
        console.log( msg + this.name + end );
    } 
}
person.show( "Hello ", "!" );    // Hello Kostas!
</code></pre>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let other = { name: "Mary" }

person.show.call( other, "Hi ", "!" );</code></pre>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>person.show.apply( other, [ "Hi ", "!" ] );</code></pre>
          </section>
          <!-- ARROW FUNCTIONS                            -->
          <section>
            <h3><strong class="colorful">this</strong> in Arrow Functions</h3>
            <p class="small fragment">Arrow functions don't provide their own this binding<br/>It retains the this value of the enclosing lexical context.</p>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>let obj = {
    name: "Kostas",
    show: function(){ 
        setTimeout(function(){
         console.log( this.name );
        }, 2000)
    }
} </code></pre>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>obj.show();
/// undefined</code></pre>
          </section>
          <!-- ARROW FUNCTIONS #2-->
          <section>
            <p class="small">Remember: setTimeout is called from window and thus<br/>its inner function binds <strong class="colorful">this</strong> to its context (that of the calling site).</p>
            <pre><code class="hljs javascript" data-trim contenteditable>let obj = {
    name: "Kostas",
    show: function(){ 
        window.setTimeout(function(){
         console.log( this.name );
        }, 2000)
    }
} </code></pre>
            <p class="small fragment">How can we change this?</p>
          </section>
          <!-- ARROW FUNCTIONS #3-->
          <section>
            <p class="small">#1 Using bind()</p>
            <pre><code class="hljs javascript" data-trim contenteditable>let obj = {
    name: "Kostas",
    show: function(){ 
        window.setTimeout(function(){
         console.log( this.name );
        }.bind( this ), 2000)
    }
} </code></pre>
          </section>
          <!-- ARROW FUNCTIONS #4-->
          <section>
            <p class="small">#2 Using an Arrow Function</p>
            <pre><code class="hljs javascript" data-trim contenteditable>let obj = {
    name: "Kostas",
    show: function(){ 
        window.setTimeout(()=>{
         console.log( this.name );
        }, 2000)
    }
} 
</code></pre>
          </section>
        </section>
        <!-- ES6: Default Function Parameters-->
        <section>
          <section>
            <h3>Default Parameters in ES5?</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable></code></pre>
          </section>
        </section>
        <!-- ES6: Spread Operator & Destructuring Assignments-->
        <section>
          <section>
            <h3>Destructuring</h3>
            <pre class="fragment"><code class="hljs javascript" data-trim contenteditable>function doStuff( one, two, { a, b, c } ) {
    console.log(a, b, c, d);
}

doStuff( 'example1', 'example2', {
    a: 'opt1',
    b: 'opt2',
    c: 'opt3'
});
</code></pre>
          </section>
        </section>
        <!-- ES6: Modules-->
        <section></section>
        <!-- TYPES & EQUALITY-->
        <section></section>
        <!-- JS PATTERNS: IIFE-->
        <section></section>
        <!-- REGULAR EXPRESSIONS -->
        <section></section>
        <!-- RESOURCES-->
        <section>
          <h3>Resources:</h3>
          <ul>
            <li><a href="https://github.com/getify/You-Dont-Know-JS/tree/master/this%20%26%20object%20prototypes">You Don't Know JS: this &amp; Object Prototypes</a></li>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">Read about this at MDN</a></li>
            <li><a target="_blank" href="https://codepen.io/kostasx/pen/NONQgL?editors=0011">Hands-on: Bitcoin Wallet</a><br><a class="bitly_link" target="_blank" href="https://bit.ly/2No4jlx"><span>https://bit.ly/<strong>2No4jlx</strong></span></a></li>
          </ul>
        </section>
        <!-- TTS | OUTRO -->
        <section class="tts-title" id="tts-outro" data-state="outro" data-transition="fade-out"></section>
      </div>
    </div>
    <script src="../libs/reveal.js/lib/js/head.min.js"></script>
    <script src="../libs/reveal.js/js/reveal.js"></script>
    <script>
      /* SHA */
      Reveal.configure({
          keyboard: {
              // Key: 'e'
              69: function(){
                  /*
                  IF NOT EXIST
                      <PRE>.insertAdjacentHTML('afterend', code);
                  EVALUATE 
                      eval( <PRE>.textContent )
                  */
              }
              }
      });
      
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
      
          history: true,
          // More info https://github.com/hakimel/reveal.js#dependencies
          dependencies: [
              { src: '../libs/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: '../libs/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
              { src: '../libs/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
              { src: '../libs/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: '../libs/reveal.js/plugin/search/search.js', async: true },
              { src: '../libs/reveal.js/plugin/zoom-js/zoom.js', async: true },
              { src: '../libs/reveal.js/plugin/notes/notes.js', async: true }
          ]
      });
      
      //- Reveal.addEventListener('data-state-value-here', function (){});
      
      Reveal.addEventListener( 'ready', function( e ) {
      
          let slideState = e.currentSlide.getAttribute('data-state');
          switch ( slideState ) {
              case 'tts-intro':
                  console.log('tts-intro');
                  document.querySelector(".reveal").classList.add("tts-intro")
                  break;
              case 'intro':
                  console.log('intro');
                  document.querySelector(".reveal").classList.remove("tts-intro")
                  break;
              case 'outro':
                  console.log('outro');
                  document.querySelector(".reveal").classList.add("tts-outro")
                  break;
              default:
                  console.log("default");
                  document.querySelector(".reveal").classList.remove("tts-outro")
                  document.querySelector(".reveal").classList.remove("tts-intro")
      
          }    
      
      });
      
      /* TTS */
      
      Reveal.addEventListener( 'slidechanged', function( e ) {
      
          let slideState = e.currentSlide.getAttribute('data-state');
          switch ( slideState ) {
              case 'tts-intro':
                  console.log('tts-intro');
                  document.querySelector(".reveal").classList.add("tts-intro")
                  break;
              case 'intro':
                  console.log('intro');
                  document.querySelector(".reveal").classList.remove("tts-intro")
                  break;
              case 'outro':
                  console.log('outro');
                  document.querySelector(".reveal").classList.add("tts-outro")
                  break;
              default:
                  console.log("default");
                  document.querySelector(".reveal").classList.remove("tts-outro")
                  document.querySelector(".reveal").classList.remove("tts-intro")
      
          }    
          // event.indexh
          
      });
    </script>
  </body>
</html>